#!/usr/bin/env bash
# This script configures Nginx on a new Ubuntu machine to add a custom HTTP response header.

# Update and upgrade system packages
sudo apt update
sudo apt upgrade -y

# Install Nginx
sudo apt install -y nginx

# Configure Nginx to add custom HTTP response header
sudo tee /etc/nginx/sites-available/custom_header > /dev/null <<EOL
server {
    listen 80;
    server_name _;

    location / {
        add_header X-Served-By \$hostname;
        # Add other necessary configurations here
    }
}
EOL

sudo ln -s /etc/nginx/sites-available/custom_header /etc/nginx/sites-enabled

# Test Nginx configuration
sudo nginx -t

# Restart Nginx to apply changes
sudo systemctl restart nginx
